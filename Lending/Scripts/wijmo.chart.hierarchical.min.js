/*
    *
    * Wijmo Library 5.20171.300
    * http://wijmo.com/
    *
    * Copyright(c) GrapeCity, Inc.  All rights reserved.
    *
    * Licensed under the Wijmo Commercial License.
    * sales@wijmo.com
    * wijmo.com/products/wijmo-5/license/
    *
    */
var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),wijmo;(function(n){var t;(function(t){var i;(function(i){'use strict';var r=function(r){function u(n,t){var i=r.call(this,n,t)||this;return i._processedData=[],i._legendLabels=[],i._level=1,i._sliceIndex=0,i._processedItem=[],i._selectionIndex=0,i.applyTemplate('wj-sunburst',null,null),i}return __extends(u,r),Object.defineProperty(u.prototype,"bindingName",{get:function(){return this._bindName},set:function(t){t!=this._bindName&&(n.assert(t==null||n.isArray(t)||n.isString(t),'bindingName should be an array or a string.'),this._bindName=t,this._bindChart())},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"childItemsPath",{get:function(){return this._childItemsPath},set:function(t){t!=this._childItemsPath&&(n.assert(t==null||n.isArray(t)||n.isString(t),'childItemsPath should be an array or a string.'),this._childItemsPath=t,this._bindChart())},enumerable:!0,configurable:!0}),u.prototype._initData=function(){r.prototype._initData.call(this);this._processedData=[];this._level=1;this._legendLabels=[];this._processedItem=[]},u.prototype._performBind=function(){var t=this,n;this._initData();this._cv&&(n=this._cv.items,this._cv.groups&&this._cv.groups.length?this._processedData=i.HierarchicalUtil.parseDataToHierarchical(this._cv,this.binding,this.bindingName,this.childItemsPath):n&&(this._processedData=i.HierarchicalUtil.parseDataToHierarchical(n,this.binding,this.bindingName,this.childItemsPath)),this._processedData&&this._processedData.length&&(this._sum=this._calculateValueAndLevel(this._processedData,1),this._processedData.forEach(function(n){t._legendLabels.push(n.name)})))},u.prototype._calculateValueAndLevel=function(n,t){var i=this,r=0,u=this._values,f=this._labels;return this._level<t&&(this._level=t),n.forEach(function(n){var e;n.items?(e=i._calculateValueAndLevel(n.items,t+1),n.value=e,u.push(e),f.push(n.name)):(e=i._getBindData(n,u,f,'value','name'),n.value=e);r+=e}),r},u.prototype._renderPie=function(n,t,i,r,u){var f=this._getCenter();this._sliceIndex=0;this._renderHierarchicalSlices(n,f.x,f.y,this._processedData,this._sum,t,i,r,2*Math.PI,u,1)},u.prototype._renderHierarchicalSlices=function(n,t,i,r,u,f,e,o,s,h,c){var rt=r.length,a=o,g=this.reversed==!0,nt,tt,d,l,y,p,it,w,b,k,v;for(d=(f-e)/this._level,nt=f-(this._level-c)*d,tt=e+(c-1)*d,v=0;v<rt;v++)w=t,b=i,it=n.startGroup('slice-level'+c),c===1&&(n.fill=this._getColorLight(v),n.stroke=this._getColor(v)),y=r[v],p=Math.abs(y.value),l=Math.abs(p-u)<1e-10?s:s*p/u,k=g?a-.5*l:a+.5*l,h>0&&l<s&&(w+=h*Math.cos(k),b+=h*Math.sin(k)),y.items&&this._renderHierarchicalSlices(n,w,b,y.items,p,f,e,a,l,0,c+1),this._renderSlice(n,w,b,k,this._sliceIndex,nt,tt,a,l,s),this._processedItem.push(y.item),this._sliceIndex++,g?a-=l:a+=l,n.endGroup(),this._pels.push(it)},u.prototype._getLabelsForLegend=function(){return this._legendLabels||[]},u.prototype._highlightCurrent=function(){this.selectionMode!=t.SelectionMode.None&&this._highlight(!0,this._selectionIndex)},u.prototype.hitTest=function(n,i){var u=r.prototype.hitTest.call(this,n,i),o=this._toControl(n,i);if(t.FlexChart._contains(this._rectChart,o)){var f=u.pointIndex,s=this._processedItem[f],e=new t._DataPoint(null,f,null,null);e.item=s;u._setDataPoint(e)}return u},u}(t.FlexPie);i.Sunburst=r})(i=t.hierarchical||(t.hierarchical={}))})(t=n.chart||(n.chart={}))})(wijmo||(wijmo={}));__extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t;(function(t){var i;(function(i){'use strict';var r,u,e,o,f;(function(n){n[n.Squarified=0]="Squarified";n[n.Horizontal=1]="Horizontal";n[n.Vertical=2]="Vertical"})(r=i.TreeMapType||(i.TreeMapType={}));u=function(u){function s(n,i){var r=u.call(this,n,null,!0)||this;return r._values=[],r._labels=[],r._areas=[],r._sum=0,r._keywords=new t._KeyWords,r._processedData=[],r._depth=1,r._itemIndex=0,r._processedItem=[],r._maxDepth=-1,r._tmItems=[],r._colRowLens=[],r._defPalette=[{titleColor:'#033884',maxColor:'#1450a7',minColor:'#83b3f9'},{titleColor:'#a83100',maxColor:'#dc4a0d',minColor:'#ffb190'},{titleColor:'#006658',maxColor:'#008d7a',minColor:'#7deddf'},{titleColor:'#a10046',maxColor:'#df0061',minColor:'#ff8cbe'},{titleColor:'#784d08',maxColor:'#99681a',minColor:'#efc989'},{titleColor:'#54156f',maxColor:'#722a90',minColor:'#cf95e7'},{titleColor:'#998605',maxColor:'#c2ac19',minColor:'#ffef8b'},{titleColor:'#9a0005',maxColor:'#c80c14',minColor:'#ff888d'}],r.applyTemplate('wj-control wj-flexchart wj-treemap',null,null),r._currentRenderEngine=new t._SvgRenderEngine(r.hostElement),r._legend=new t.Legend(r),r._legend.position=t.Position.None,r._tooltip=new t.ChartTooltip,r._tooltip.content='<b>{name}</b><br/>{value}',r._tooltip.showDelay=0,r._lbl=new t.DataLabel,r._lbl._chart=r,r.hostElement.addEventListener('mousemove',function(n){r.isTouching||r._toogleTooltip(n)}),r.hostElement.addEventListener('click',function(n){var e=!0,i,u,f;r.maxDepth>0&&(i=r.hitTest(n),u=t.FlexChart._SELECTION_THRESHOLD,r.tooltip&&r.tooltip.threshold&&(u=r.tooltip.threshold),i.distance<=u&&i.pointIndex>=-1&&i.pointIndex<r._areas.length&&(f=r._areas[i.pointIndex],r._currentItem!=f.item&&(r._currentItem=f.item,r._refreshChart(),e=!1)));e&&r.isTouching&&r._toogleTooltip(n)}),r.hostElement.addEventListener('contextmenu',function(n){if(r.maxDepth>0){var u=r.hitTest(n),i=t.FlexChart._SELECTION_THRESHOLD;r.tooltip&&r.tooltip.threshold&&(i=r.tooltip.threshold);u.distance<=i&&r._rollUp()}return n.preventDefault(),!1}),r.hostElement.addEventListener('mouseleave',function(){r._hideToolTip()}),r.initialize(i),r.refresh(),r}return __extends(s,u),s.prototype._rollUp=function(){this._currentItem=this._currentItem&&this._currentItem.parent?this._currentItem.parent:null;this._refreshChart()},s.prototype._toogleTooltip=function(t){var r=this._tooltip,f=r.content,i,u;f&&(i=this.hitTest(t),i.distance<=r.threshold?(u=this._getLabelContent(i,this.tooltip.content),this._showToolTip(u,new n.Rect(t.clientX,t.clientY,5,5))):this._hideToolTip())},Object.defineProperty(s.prototype,"tooltip",{get:function(){return this._tooltip},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"binding",{get:function(){return this._binding},set:function(t){t!=this._binding&&(this._binding=n.asString(t,!0),this._bindChart())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"type",{get:function(){return this._type==null?r.Squarified:this._type},set:function(t){t!=this._type&&(this._type=n.asEnum(t,r),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"bindingName",{get:function(){return this._bindingName},set:function(t){t!=this._bindingName&&(n.assert(t==null||n.isArray(t)||n.isString(t),'bindingName should be an array or a string.'),this._bindingName=t,this._bindChart())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"dataLabel",{get:function(){return this._lbl},set:function(n){n!=this._lbl&&(this._lbl=n,this._lbl&&(this._lbl._chart=this))},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"childItemsPath",{get:function(){return this._childItemsPath},set:function(t){t!=this._childItemsPath&&(n.assert(t==null||n.isArray(t)||n.isString(t),'childItemsPath should be an array or a string.'),this._childItemsPath=t,this._bindChart())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"maxDepth",{get:function(){return this._maxDepth},set:function(t){t!=this._maxDepth&&(this._maxDepth=n.asNumber(t,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"palette",{get:function(){return this._palette},set:function(t){t!=this._palette&&(this._palette=n.asArray(t),this._tmItems&&this._tmItems.length>0&&this._calculateColorForItems(this._tmItems),this.invalidate())},enumerable:!0,configurable:!0}),s.prototype._initData=function(){this._sum=0;this._tmItems=[];this._currentItem=null;this._values=[];this._labels=[];this._processedData=[];this._depth=1;this._processedItem=[]},s.prototype._performBind=function(){var n;this._initData();this._cv&&(n=this._cv.items,this._cv.groups&&this._cv.groups.length?this._processedData=i.HierarchicalUtil.parseDataToHierarchical(this._cv,this.binding,this.bindingName,this.childItemsPath):n&&(this._processedData=i.HierarchicalUtil.parseDataToHierarchical(n,this.binding,this.bindingName,this.childItemsPath)),this._processedData&&this._processedData.length&&(this._sum=this._calculateValueAndDepth(this._processedData,1),this._sortData(this._processedData),this._values=[],this._getTMItemsAndLabelsAndValues(this._processedData,this._tmItems,1,null),this._calculateColorForItems(this._tmItems)))},s.prototype._sortData=function(n){var t=this;n.forEach(function(n){n.items&&t._sortData(n.items)});n.sort(function(n,t){return t.value-n.value})},s.prototype._getTMItemsAndLabelsAndValues=function(n,t,i,r){var u=this;n&&n.length>0&&n.forEach(function(n){var f=new e,o;f.items=[];f.parent=r;f.depth=i;n.items&&u._getTMItemsAndLabelsAndValues(n.items,f.items,i+1,f);o=n.name?n.name:n.value.toString();f.label=o;f.value=n.value;r!=null&&(n.value>r.maxValue&&(r.maxValue=n.value),n.value<r.minValue&&(r.minValue=n.value));t.push(f);u._labels.push(o);u._values.push(n.value)})},s.prototype._calculateColorForItems=function(t,i,r){var u=this,f=r;t.forEach(function(t,r){var h=i,e,s,l,c,a;t.depth===1&&(h=u._getColor(r));t.palette=h;e=t.palette;n.isString(e)?(s=e,l=u._getLightColor(s),t.titleFill=s,t.titleStroke=s,t.fill=l,t.stroke=s):e.maxColor&&e.minColor&&e.titleColor&&(t.titleFill=e.titleColor,t.titleStroke=e.titleColor,t.parent==null?(t.fill=e.maxColor,t.stroke=e.maxColor):(f==null&&(f=new o(e.minColor,t.minValue,e.maxColor,t.maxValue)),c=f._calculateColorByVal(t.value,!0).toString(),t.fill=c,t.stroke=c));t.items&&t.items.length>0&&(a=new o(e.minColor,t.minValue,e.maxColor,t.maxValue),u._calculateColorForItems(t.items,h,a))})},s.prototype._getBindData=function(t,i,r){var f,u=0;return r&&(f=t[r]),u=0,n.isNumber(f)?u=n.asNumber(f):f&&(u=parseFloat(f.toString())),!isNaN(u)&&isFinite(u)?i.push(u):(u=0,i.push(u)),u},s.prototype._calculateValueAndDepth=function(n,t){var i=this,r=0,u=this._values;return this._depth<t&&(this._depth=t),n.forEach(function(n){var f;n.items?(f=i._calculateValueAndDepth(n.items,t+1),n.value=f,u.push(f)):(f=i._getBindData(n,u,'value'),n.value=f);r+=f}),r},s.prototype._render=function(i){var k=this.hostElement,a=this._getHostSize(),u=a.width,f=a.height,v,y,p,w,l,e,h,r,c,o,b;if((u==0||isNaN(u))&&(u=t.FlexChart._WIDTH),(f==0||isNaN(f))&&(f=t.FlexChart._HEIGHT),w=new n.Size(u,f),i.beginRender(),u>0&&f>0){this._areas=[];i.setViewportSize(u,f);l=this.legend;r=new n.Rect(0,0,u,f);this._rectChart=r.clone();i.startGroup(t.FlexChart._CSS_HEADER);r=this._drawTitle(i,r,this.header,this.headerStyle,!1);i.endGroup();i.startGroup(t.FlexChart._CSS_FOOTER);r=this._drawTitle(i,r,this.footer,this.footerStyle,!0);i.endGroup();this.onRendering(new t.RenderEventArgs(i));u=r.width;f=r.height;c=l._getPosition(u,f);e=l._getDesiredSize(i,c,u,f);switch(c){case t.Position.Right:u-=e.width;h=new n.Point(u,r.top+.5*(f-e.height));break;case t.Position.Left:r.left+=e.width;u-=e.width;h=new n.Point(0,r.top+.5*(f-e.height));break;case t.Position.Top:f-=e.height;h=new n.Point(.5*(u-e.width),r.top);r.top+=e.height;break;case t.Position.Bottom:f-=e.height;h=new n.Point(.5*(u-e.width),r.top+f)}r.width=u;r.height=f;this._tmGroup=i.startGroup(null,null,!0);o=this._parseMargin(this.plotMargin);b=this.dataLabel;isNaN(o.left)&&(o.left=s._MARGIN);isNaN(o.right)&&(o.right=s._MARGIN);isNaN(o.top)&&(o.top=s._MARGIN);isNaN(o.bottom)&&(o.bottom=s._MARGIN);r.top+=o.top;f=r.height-(o.top+o.bottom);r.height=f>0?f:24;r.left+=o.left;u=r.width-(o.left+o.right);r.width=u>0?u:24;this._plotRect=r;v=this._currentItem?[this._currentItem]:this._tmItems;y=this._currentItem==null||this.maxDepth<1?this.maxDepth:this._currentItem&&this._currentItem.items&&this._currentItem.items.length&&this.maxDepth>1?this.maxDepth:this.maxDepth+1;p=this._currentItem?this._currentItem.value:this._sum;this._renderTreeMap(i,r,this._tmGroup,v,p,y);i.endGroup();e?(this._legendHost=i.startGroup(t.FlexChart._CSS_LEGEND),this._rectLegend=new n.Rect(h.x,h.y,e.width,e.height),i.textFill=t.FlexChart._FG,this.legend._render(i,h,c,e.width,e.height),i.textFill=null,i.endGroup()):(this._legendHost=null,this._rectLegend=null);this.dataLabel.content&&this.dataLabel.position!=t.LabelPosition.None&&this._renderLabels(i);this.onRendered(new t.RenderEventArgs(i))}i.endRender()},s.prototype._renderTreeMap=function(n,t,i,r,u,f){u>0&&(this._itemIndex=0,this._resetItemRects(this._tmItems),this._calculateItemRects(t,r,u,1,f),this._renderHierarchicalTreeMapItems(n,i,t,this._tmItems,u,1,f))},s.prototype._resetItemRects=function(t){var i=this;t.forEach(function(t){t.rect=new n.Rect(0,0,0,0);t.isTitle=!1;t.type=i.type;t.items&&t.items.length&&i._resetItemRects(t.items)})},s.prototype._calculateItemRects=function(n,t,i,u,e){var o=this,s=this.type;switch(s){case r.Horizontal:f.horizontal(t,n,i);break;case r.Vertical:f.vertical(t,n,i);break;case r.Squarified:f.squarified(t,n,i)}t.forEach(function(n){var t=n.rect.clone();n.items&&n.items.length&&(u===e||u>e&&e>=1||(n.isTitle=!0,o._calculateItemRects(n.itemsRect,n.items,n.value,u+1,e)))})},s.prototype._renderHierarchicalTreeMapItems=function(n,i,r,u,f,e,o){var v=u.length,w=this.type,y,h,a,p,c,l;if(v!==0)for(l=0;l<v;l++)y=n.startGroup(s._CSS_ITEMDEPTH+e),h=u[l],a=Math.abs(h.value),p=h.rect,h.draw(n),c=new t._RectArea(p),h.items&&this._renderHierarchicalTreeMapItems(n,y,h.itemsRect,h.items,a,e+1,o),c.tag=this._itemIndex,c.name=h.label,c.value=a,c.item=h,this._areas.push(c),this._itemIndex++,n.endGroup()},s.prototype._renderLabels=function(i){var a=this._areas.length,u=this.dataLabel,l=u.position,v=u.connectingLine,y=u.border,f,e,s,r,h,o,c;for(l=t.LabelPosition.Center,i.stroke='null',i.fill='transparent',i.strokeWidth=1,i.startGroup('wj-data-labels'),e=0;e<a;e++)s=this._areas[e],s&&(r=s.rect,h=new t.HitTestInfo(this,f),h._setData(null,e),o=this._getLabelContent(h,u.content),f=new n.Point(r.left+r.width/2,r.top+r.height/2),o&&r.width>0&&r.height>0&&(c=new t.DataLabelRenderEventArgs(i,h,f,o),u.onRendering(c)&&(o=c.text,f=c.point,this._renderLabelAndBorder(i,s,r,o,l,0,f,v,2,y))));i.endGroup()},s.prototype._renderLabelAndBorder=function(n,i,r,u,f,e,o,s,h,c){var l,a='wj-data-label',v='wj-data-label-line';switch(f){case t.LabelPosition.Top:s&&n.drawLine(o.x,o.y,o.x,o.y-e,v);o.y-=h+e;l=this._renderText(n,i,r,u,o,1,2,a);break;case t.LabelPosition.Bottom:s&&n.drawLine(o.x,o.y,o.x,o.y+e,v);o.y+=h+e;l=this._renderText(n,i,r,u,o,1,0,a);break;case t.LabelPosition.Left:s&&n.drawLine(o.x,o.y,o.x-e,o.y,v);o.x-=h+e;l=this._renderText(n,i,r,u,o,2,1,a);break;case t.LabelPosition.Right:s&&n.drawLine(o.x,o.y,o.x+e,o.y,v);o.x+=h+e;l=this._renderText(n,i,r,u,o,0,1,a);break;case t.LabelPosition.Center:l=this._renderText(n,i,r,u,o,1,1,a)}return c&&l&&n.drawRect(l.left-h,l.top-h,l.width+2*h,l.height+2*h,'wj-data-label-border'),l},s.prototype._renderText=function(n,i,u,f,e,o,s,h){var l=f,c,a=i.item;return c=n.measureString(f,h),this.type===r.Horizontal&&a.isTitle?(c.width>u.height&&(l=this._cutText(f,c.width,u.height)),t.FlexChart._renderRotatedText(n,l,e,o,s,e,-90,h),null):(c.width>u.width&&(l=this._cutText(f,c.width,u.width)),t.FlexChart._renderText(n,l,e,o,s,h))},s.prototype._cutText=function(n,t,i){var r='',f=n.length,u=Math.floor((1-(t-i)/t)*f);return n.length>0&&(r=n[0]+(u>0?n.substring(1,u-1)+'..':'')),r},s.prototype._measureLegendItem=function(i,r){var u=new n.Size,f;return u.width=t.Series._LEGEND_ITEM_WIDTH,u.height=t.Series._LEGEND_ITEM_HEIGHT,r&&(f=i.measureString(r,t.FlexChart._CSS_LABEL,t.FlexChart._CSS_LEGEND),u.width+=f.width,u.height<f.height&&(u.height=f.height)),u.width+=3*t.Series._LEGEND_ITEM_MARGIN,u.height+=2*t.Series._LEGEND_ITEM_MARGIN,u},s.prototype._getDesiredLegendSize=function(t,i,r,u){var f=new n.Size,s=new n.Size(r,u),h=this._tmItems.length,r=0,u=0,o,e;for(this._colRowLens=[],o=0;o<h;o++)e=this._measureLegendItem(t,this._tmItems[o].label),i?(r<e.width&&(r=e.width),u+e.height>s.height&&(f.height=s.height,this._colRowLens.push(r),u=0,r=0),u+=e.height,o===h-1&&(f.height<u&&(f.height=u),this._colRowLens.push(r))):(u<e.height&&(u=e.height),r+e.width>s.width&&(f.width=s.width,this._colRowLens.push(u),u=0,r=0),r+=e.width,o===h-1&&(f.width<r&&(f.width=r),this._colRowLens.push(u)));return i?f.width=this._colRowLens.reduce(function(n,t){return n+t},0):f.height=this._colRowLens.reduce(function(n,t){return n+t},0),f},s.prototype._renderLegend=function(t,i,r,u){for(var e,l,o=this._rectLegend,a=this._tmItems.length,s=0,f=i.clone(),c,h=0;h<a;h++)c=this._tmItems[h].label,e=this._measureLegendItem(t,c),u?f.y+e.height>o.top+o.height+1&&(f.x+=this._colRowLens[s],s++,f.y=i.y):f.x+e.width>o.left+o.width+1&&(f.y+=this._colRowLens[s],s++,f.x=i.x),l=new n.Rect(f.x,f.y,e.width,e.height),this._drawLegendItem(t,l,h,c),r.push(l),u?f.y+=e.height:f.x+=e.width},s.prototype._drawLegendItem=function(i,r,u,f){i.strokeWidth=1;var s=t.Series._LEGEND_ITEM_MARGIN,e=this._getColor(u),h=e&&e.maxColor?e.maxColor:e,l=this._getLightColor(h);i.fill=h;i.stroke=l;var c=r.top+.5*r.height,a=t.Series._LEGEND_ITEM_WIDTH,o=t.Series._LEGEND_ITEM_HEIGHT;i.drawRect(r.left+s,c-.5*o,a,o,null);f&&t.FlexChart._renderText(i,f,new n.Point(r.left+o+2*s,c),0,1,t.FlexChart._CSS_LABEL)},s.prototype._getLabelContent=function(t,i){return n.isString(i)?this._keywords.replace(i,t):n.isFunction(i)?i(t):null},s.prototype.hitTest=function(n,i){var u=this._toControl(n,i),r=new t.HitTestInfo(this,u),f=null,a,e,c,s,l,o,h;if(t.FlexChart._contains(this._rectHeader,u))r._chartElement=t.ChartElement.Header;else if(t.FlexChart._contains(this._rectFooter,u))r._chartElement=t.ChartElement.Footer;else if(t.FlexChart._contains(this._rectLegend,u))r._chartElement=t.ChartElement.Legend,f=this.legend._hitTest(u),f!==null&&f>=0&&f<this._areas.length&&r._setData(null,f);else if(t.FlexChart._contains(this._rectChart,u)){for(a=this._areas.length,e=NaN,s=0;s<a;s++)l=u.clone(),o=this._areas[s],o.contains(l)&&(r._setData(null,o.tag),r._dist=0),h=o.distance(l),h!==undefined&&(isNaN(e)||h<e)&&(e=h,c=o);r._dist!==0&&c!=null&&(r._setData(null,c.tag),r._dist=e);r._chartElement=t.ChartElement.ChartArea}else r._chartElement=t.ChartElement.None;return r},s.prototype._getHitTestItem=function(n){var t=null,i=null;return t=this._cv!=null?this._cv.items:this.itemsSource,t&&n<t.length&&(i=t[n]),i},s.prototype._getHitTestValue=function(n){return this._values[n]},s.prototype._getHitTestLabel=function(n){return this._labels[n]},s}(t.FlexChartBase);u._CSS_ITEMDEPTH='wj-treemap-item-depth';u._MARGIN=0;i.TreeMap=u;e=function(){function t(){this.items=[];this.maxValue=Number.MIN_VALUE;this.minValue=Number.MAX_VALUE}return t.prototype.draw=function(n){var i=this.rect;n.strokeWidth=0;this.isTitle?(n.fill=this.titleFill,n.stroke=this.titleStroke):(n.fill=this.fill,n.stroke=this.stroke);n.drawRect(i.left,i.top,i.width,i.height,t._CLASSNAME)},Object.defineProperty(t.prototype,"itemsRect",{get:function(){var t=this.rect,i=this._rect,u=this.depth===1?2:.5;return this.isTitle?this.type===r.Horizontal?new n.Rect(t.left+t.width+1,t.top,i.width-t.width-u*2,t.height+1):new n.Rect(t.left,t.top+t.height+1,t.width+1,i.height-t.height-u*2):new n.Rect(0,0,0,0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rect",{get:function(){var f=this._rect,t=this.depth===1?2:.5,i=f.width,u=f.height,e=f.left,o=f.top;return this.isTitle?(this.type===r.Horizontal?(i=f.width>20?20:i,i=Math.max(20,i-2*t),u=u>t*2?u-t*2:0):(u=f.height>20?20:u,u=Math.max(20,u-2*t),i=i>t*2?i-t*2:0),e=e+t,o=o+t):(i=i>t*2?i-t*2:0,u=u>t*2?u-t*2:0),new n.Rect(e,o,i,u)},set:function(n){n!=this._rect&&(this._rect=n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isTitle",{get:function(){return this._isTitle},set:function(t){var i=n.asBoolean(t,!0);i!==this._isTitle&&(this._isTitle=i)},enumerable:!0,configurable:!0}),t}();e._CLASSNAME='wj-treemap-item';o=function(){function t(t,i,r,u,f,e){this.minColor=new n.Color(t);this.minColorValue=i;this.maxColor=new n.Color(r);this.maxColorValue=u;this.midColorValue=this.originalMidColorValue=e;this._calculateMidColorValue();this.midColor=this.originalMidColor=new n.Color(f);this._calculateMidColor()}return t.prototype._resetminColor=function(t){this.minColor=new n.Color(t);this._calculateMidColor()},t.prototype._resetmidColor=function(t){this.midColor=this.originalMidColor=new n.Color(t);this._calculateMidColor()},t.prototype._resetmaxColor=function(t){this.maxColor=new n.Color(t);this._calculateMidColor()},t.prototype._resetminColorValue=function(n){this.minColorValue=n;this._calculateMidColorValue()},t.prototype._resetmidColorValue=function(n){this.midColorValue=this.originalMidColorValue=n;this._calculateMidColorValue()},t.prototype._resetmaxColorValue=function(n){this.maxColorValue=n;this._calculateMidColorValue()},t.prototype._calculateMidColorValue=function(){this.originalMidColorValue==null&&(this.midColorValue=(this.maxColorValue+this.minColorValue)/2)},t.prototype._calculateMidColor=function(){this.originalMidColor==null&&(this.midColor=this._calculateColorByVal(this.midColorValue,!0))},t.prototype._calculateColorByVal=function(t,i){i===void 0&&(i=!1);var r=this.maxColor,u=this.minColor,f=this.maxColorValue,e=this.minColorValue;if(t>=this.maxColorValue)return new n.Color(r.toString());if(t<=this.minColorValue)return new n.Color(u.toString());if(!i){if(t===this.midColorValue)return new n.Color(this.midColor.toString());t<this.midColorValue?(r=this.midColor,f=this.midColorValue):(u=this.midColor,e=this.midColorValue)}return this._getColor(t,r,f,u,e)},t.prototype._getColor=function(t,i,r,u,f){return n.Color.fromRgba(this._getValueByRatio(t,i.r,r,u.r,f),this._getValueByRatio(t,i.g,r,u.g,f),this._getValueByRatio(t,i.b,r,u.b,f),this._getValueByRatio(t,i.a,r,u.a,f))},t.prototype._getValueByRatio=function(n,t,i,r,u){return Math.abs(r+Math.round((n-u)*(t-r)/(i-u)))},t}();f=function(){function t(){}return t.squarified=function(n,i,r){var f=n.slice(),u=i.clone(),o=u.width*u.height/r,e,s;do e=t.getRowedItems(f,u,o),s=t.layoutRowedItems(i,e,u,u.width>u.height);while(f.length)},t.horizontal=function(n,i,r){var u=i.clone();n.forEach(function(n){var f=[{item:n,val:n.value*i.width*i.height/r}],e=t.layoutRowedItems(i,f,u,!1)})},t.vertical=function(n,i,r){var u=i.clone();n.forEach(function(n){var f=[{item:n,val:n.value*i.width*i.height/r}],e=t.layoutRowedItems(i,f,u,!0)})},t.getNarrowLen=function(n){return Math.min(n.width,n.height)},t.getRowedItem=function(n,t,i){var r=i*n.value;return{item:n,val:r}},t.getRowedItems=function(n,i,r){var s=n.shift(),u=[],f=[],e=t.getNarrowLen(i),o=t.getRowedItem(s,i,r);if(u.push(o),f.push(o),n.length>0)do if(f.push(t.getRowedItem(n[0],i,r)),t.worst(u,e)>t.worst(f,e))u=f.slice(),n.shift();else break;while(n.length);return u},t.layoutRowedItems=function(i,r,u,f){var o=u.left,s=u.top,h=o+u.width,c=s+u.height,e,l=t.sumRowedArray(r);f?(e=u.height===0?0:l/u.height,o+e>=h&&(e=h-o),r.forEach(function(t,i){var u=e===0?0:t.val/e,f;(s+u>c||i===r.length-1)&&(u=c-s);f=new n.Rect(o,s,e,u);t.item.rect=f;s+=u}),u.left+=e,u.width-=e):(e=u.width===0?0:l/u.width,s+e>=c&&(e=c-s),r.forEach(function(t,i){var u=e===0?0:t.val/e,f;(o+u>h||i===r.length-1)&&(u=h-o);f=new n.Rect(o,s,u,e);t.item.rect=f;o+=u}),u.top+=e,u.height-=e)},t.sumRowedArray=function(n){for(var i=0,r=n.length,t=0;t<r;t++)i+=n[t].val;return i},t.worst=function(n,i){var r,u,f=t.sumRowedArray(n),e=f*f,o=i*i;return r=u=n[0].val,n.forEach(function(n){n.val>r?r=n.val:n.val<u&&(u=n.val)}),Math.max(o*r/e,e/(o*u))},t}()})(i=t.hierarchical||(t.hierarchical={}))})(t=n.chart||(n.chart={}))}(wijmo||(wijmo={})),function(n){var t;(function(t){var i;(function(t){'use strict';var i=function(){function t(){}return t.parseDataToHierarchical=function(i,r,u,f){var e=[],o;return i instanceof n.collections.CollectionView&&i.groups.length>0?e=t.parseGroupCV(i,r):i.length>0&&(n.isString(u)&&u.indexOf(',')>-1&&(u=u.split(',')),f?e=t.parseItems(i,r,u,f):(o=t.convertFlatData(i,r,u),e=t.parseItems(o,'value',u,'items'))),e},t.parseGroupCV=function(n,t){for(var u,r=[],i=0,f=n.groups.length;i<f;i++)u=this.parseGroups(n.groups[i],t),r.push(u);return r},t.parseGroups=function(t,i){var r={},u,f,e;if(r.name=t.name,r.nameField=t.groupDescription.propertyName,r.item=t.items,t.groups&&t.groups.length)for(r.items=[],u=0,f=t.groups.length;u<f;u++)e=this.parseGroups(t.groups[u],i),r.items.push(e);else t.isBottomLevel&&(r.value=t.getAggregate(n.Aggregate.Sum,i));return r},t.parseItems=function(n,i,r,u){for(var e=[],o=n.length,f=0;f<o;f++)e.push(t.parseItem(n[f],i,r,u));return e},t.isFlatItem=function(t,i){return n.isArray(t[i])?!1:!0},t.convertFlatData=function(i,r,u){for(var e=[],o={},s,h=i.length,f=0;f<h;f++)s=i[f],t.convertFlatItem(o,s,r,n.isArray(u)?u:[u]);return t.convertFlatToHierarchical(e,o),e},t.convertFlatToHierarchical=function(n,i){var r=i.flatDataOrder;r&&r.forEach(function(r){var u={},f=i[r],e;u[i.field]=r;f.flatDataOrder?(e=[],t.convertFlatToHierarchical(e,f),u.items=e):u.value=f;n.push(u)})},t.convertFlatItem=function(n,i,r,u){var e,o,f,s,h;return(e=u.slice(),o=e.shift().trim(),f=i[o],f==null)?!1:(e.length===0?(n[f]=i[r]||0,n.flatDataOrder?n.flatDataOrder.push(f):n.flatDataOrder=[f],n.field=o):(n[f]==null&&(n[f]={},n.flatDataOrder?n.flatDataOrder.push(f):n.flatDataOrder=[f],n.field=o),s=n[f],h=t.convertFlatItem(s,i,r,e),h||(n[f]=i[r])),!0)},t.parseItem=function(i,r,u,f){var e={},h,l,o,c,s;return n.isArray(f)?(s=f.slice(),c=s.length?s.shift().trim():''):(s=f,c=f),n.isArray(u)?(h=u.slice(),l=h.shift().trim(),e.nameField=l,e.name=i[l],o=i[c],h.length===0?e.value=i[r]:o&&n.isArray(o)&&o.length>0?e.items=t.parseItems(o,r,h,s):e.value=i[r]||0):(e.nameField=u,e.name=i[u],o=i[c],o!=null&&n.isArray(o)&&o.length>0?e.items=t.parseItems(o,r,u,s):e.value=i[r]),e.item=i,e},t.parseFlatItem=function(n){n.items||(n.items=[])},t}();t.HierarchicalUtil=i})(i=t.hierarchical||(t.hierarchical={}))})(t=n.chart||(n.chart={}))}(wijmo||(wijmo={}))